{
  "swift_code": "//\n//  ChooseViewModel.swift\n//  StealPlateSwift\n//\n//  Created by 스틸리언 on 2022/08/12.\n//\n\nimport Foundation\nimport RxCocoa\n\nclass ChooseViewModel {\n    private let loadFeelingUseCase: LoadFeelingUseCase\n    private let loadSelectedFeelingsUseCase: LoadSelectedFeelingsUseCase\n    private let feelingRepository: FeelingRepository\n    \n    init(loadFeelingUseCase: LoadFeelingUseCase, loadSelectedFeelingsUseCase: LoadSelectedFeelingsUseCase, feelingRepository: FeelingRepository) {\n        self.loadFeelingUseCase = loadFeelingUseCase\n        self.loadSelectedFeelingsUseCase = loadSelectedFeelingsUseCase\n        self.feelingRepository = feelingRepository\n    }\n    \n    // MARK: - Variable\n    let feelingsSequence: BehaviorRelay<[Feeling]> = BehaviorRelay<[Feeling]>(value: [])\n    \n    var feelings: [Feeling] = []\n    \n    // MARK: - Public func\n    func didSelectFeeling(_ index: Int) {\n        let id = feelings[index].id\n        \n        if let idx = feelings.firstIndex(where: { $0.id == id }) {\n            let prevItem = feelings[idx]\n            \n            feelings[idx] = Feeling(id: prevItem.id,\n                                    feelName: prevItem.feelName,\n                                    image: prevItem.image,\n                                    isSelected: !prevItem.isSelected)\n            \n            if feelings[idx].isSelected {\n                feelingRepository.saveSelectedFeeling(feeling: feelings[idx])\n            } else {\n                feelingRepository.deleteSelectedFeeling(feelingId: feelings[idx].id)\n            }\n        }\n        \n        feelingsSequence.accept(feelings)\n    }\n    \n    func selectedFeelings() -> [Feeling] {\n        return loadSelectedFeelingsUseCase.call()\n    }\n    \n    func loadFeelings() {\n        feelings = loadFeelingUseCase.call()\n        feelingsSequence.accept(feelings)\n    }\n}",
  "ast_symbols": [
    {
      "symbolName": "deleteSelectedFeeling",
      "symbolKind": "unknown"
    }
  ],
  "target_identifier": "deleteSelectedFeeling"
}